<!doctype html><html lang=en><head><meta charset=utf-8><title>1: intro</title>
<meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><link rel=stylesheet href=../reveal-js/css/reset.css><link rel=stylesheet href=../reveal-js/css/reveal.css><link rel=stylesheet href=../reveal-js/css/theme/black.css id=theme><link rel=stylesheet href=../highlight-js/default.min.css></head><body><div class=reveal><div class=slides><section><h2 id=well-get-started-at-16805>We&rsquo;ll get started at 1[68]:05</h2></section><section data-noprocess data-shortcode-slide class=center><h1 id=tooling-setup>tooling setup</h1><h3 id=6447-week1>6447 week1</h3></section><section><section data-shortcode-section><h2 id=good-faith-policy>Good faith policy</h2><p>We expect a high standard of professionalism from you at all times while you are taking any of our courses. We expect all students to act in good faith at all times</p><p><em>TLDR: Don&rsquo;t be a <del>dick</del> jerk</em></p><p><a href=https://sec.edu.au/good-faith-policy>sec.edu.au/good-faith-policy</a></p></section><section><p><img src=../assets/img/week01/sus.png alt></p></section></section><section><section data-shortcode-section><h2 id=-whoami>> whoami</h2><ul><li>Lachlan</li></ul></section><section><h2 id=how-to-contact-me>how to contact me</h2><ul><li><a href=mailto:lachlan.waugh@student.unsw.edu.au>lachlan.waugh@student.unsw.edu.au</a></li><li><a href>@melon</a> on the SecEdu Slack</li><li><a href>@melon</a> on the SecSoc Discord</li></ul></section><section><h2 id=places-for-course-discussion>places for course discussion</h2><ul><li>probably the discord mostly</li><li>used to be secedu slack but it is :zombie:</li><li>I will be more responsive on discord than email</li></ul></section><section><h2 id=where-to-access-resources>where to access resources</h2><ul><li><a href=https://waugh.zip/6447>waugh.zip/6447</a></li><li>tutorials may be recorded, idk yet</li></ul></section></section><section><h2 id=-whoareu>> whoareu</h2><section data-shortcode-section><p><img src=../assets/img/week01/icebreaker.jpg alt></p></section><section><ul><li>your name, degree, year?</li><li>why&rsquo;d you do the course?</li><li>what has been your favourite course so far</li><li>have you done a security course before (644[135])?</li><li><del>Your credit card number and the 3 wacky digits on the back</del></li></ul></section></section><section><section data-shortcode-section><h2 id=course-content>Course content</h2><ul><li>wargames (30%)</li><li>fuzzer (30%)</li><li>final (40%)</li></ul></section><section><h2 id=wargames>wargames</h2><ul><li><strong>flag != full marks</strong>, you need to submit:<ul><li>the script you used to get it</li><li>an explanation: your process/the vulnerability</li></ul></li></ul></section><section><h2 id=notes-on-wargames>notes on wargames</h2><ul><li>don&rsquo;t leave them to the last minute, you&rsquo;ll be sad :(</li><li>you probably won&rsquo;t get all the flags</li><li>cool to collaborate/work together, but your flags and scripts/explanations need to be different.</li></ul></section><section><h2 id=fuzzer>fuzzer</h2><ul><li>group assignment</li><li>there&rsquo;s also a midpoint submission</li></ul></section></section><section><section data-shortcode-section><h2 id=pointers>pointers</h2><p><img src=../assets/img/week01/pointers.png alt></p></section><section><h2 id=pointer-arrays>pointer arrays</h2><p><img src=../assets/img/week01/pointer.png alt></p></section></section><section><h2 id=tooling-setup-1>tooling setup</h2><ul><li>binary-ninja</li><li>gdb/pwndbg</li><li>pwntools</li></ul></section><section><section data-shortcode-section><h2 id=binary-ninja>binary-ninja</h2><p>attempts to reconstruct the source code</p></section><section><h2 id=the-most-important-things>the most important things</h2><p>right-click ></p><ul><li>rename variable</li><li>display as</li><li>create structure</li><li>change type</li><li>highlight instruction</li></ul></section><section><h2 id=displaying-the-information>displaying the information</h2><p>there&rsquo;s multiple ways to display the information</p><ul><li>pseudo-C</li><li>high-level IL</li><li>disassembly</li><li>graph view</li></ul></section><section><h2 id=demos>demos</h2><ul><li><a href=../demos/my-first-program>binja1</a></li><li><a href=../demos/my-second-program>binja2</a></li></ul></section></section><section><section data-shortcode-section><h2 id=gdb--pwndbg>gdb / pwndbg</h2><p>allows you to modify the binary during execution</p></section><section><h2 id=pwndbg>pwndbg</h2><ul><li>a nice plugin for gdb</li><li>makes the terrible syntax less terrible</li><li>really easy to install just go <a href=https://github.com/pwndbg/pwndbg>here</a></li></ul></section><section><h2 id=debugging-a-process>debugging a process</h2><p>how to get started</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span>att <span style=color:#ae81ff>1234</span>          <span style=color:#75715e># attach to running process 1234</span>
</span></span><span style=display:flex><span>b 0x1337          <span style=color:#75715e># break at address 1337</span>
</span></span><span style=display:flex><span>break *<span style=color:#f92672>(</span>main<span style=color:#f92672>)</span>     <span style=color:#75715e># break at the first instruction in main()</span>
</span></span><span style=display:flex><span>break *<span style=color:#f92672>(</span>main+12<span style=color:#f92672>)</span>  <span style=color:#75715e># break at the address 12 bytes after main</span>
</span></span><span style=display:flex><span>c                 <span style=color:#75715e># continue until next breakpoint/end program</span>
</span></span><span style=display:flex><span>si                <span style=color:#75715e># step by a single instruction</span>
</span></span><span style=display:flex><span>fin               <span style=color:#75715e># go until end of current function</span>
</span></span></code></pre></div></section><section><h2 id=examining--modifying-data>examining & modifying data</h2><p>changing the flow of the application</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span>x 0x1337        <span style=color:#75715e># examine at 0x1337</span>
</span></span><span style=display:flex><span>x/20wx 0x1337   <span style=color:#75715e># examine 20 words from 0x1337</span>
</span></span><span style=display:flex><span>x/s 0x1337      <span style=color:#75715e># examine string at 0x1337</span>
</span></span><span style=display:flex><span>set $reg<span style=color:#f92672>=</span>value  <span style=color:#75715e># set register = value ie: set $ebx=1</span>
</span></span><span style=display:flex><span>set *<span style=color:#f92672>(</span>int *<span style=color:#f92672>)(</span>$ebp + 0xX<span style=color:#f92672>)=</span>value <span style=color:#75715e># set a local variable</span>
</span></span><span style=display:flex><span>jump *<span style=color:#f92672>(</span>0x1234<span style=color:#f92672>)</span>  <span style=color:#75715e># jump to 0x1234 (e.g. start executing there)</span>
</span></span><span style=display:flex><span>jump *<span style=color:#f92672>(</span>main<span style=color:#f92672>)</span>    <span style=color:#75715e># jump to main</span>
</span></span></code></pre></div></section><section><h2 id=demos>demos</h2><ul><li><a href=../demos/bad-check>gdb1</a></li><li><a href=../demos/ripper>gdb2</a></li></ul></section></section><section><section data-shortcode-section><h2 id=pwntools>pwntools</h2><p>a python library to interact with binaries (remotely?)</p></section><section><h2 id=connecting-to-a-program>connecting to a program</h2><p>you interact as if it were a python object</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#f92672>from</span> pwn <span style=color:#f92672>import</span> <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>p <span style=color:#f92672>=</span> remote(<span style=color:#e6db74>&#39;abc.com&#39;</span>, <span style=color:#ae81ff>1234</span>) <span style=color:#75715e># connect to a remote server</span>
</span></span><span style=display:flex><span>p <span style=color:#f92672>=</span> process(<span style=color:#e6db74>&#39;./vuln&#39;</span>)       <span style=color:#75715e># or run a local binary</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># do stuff with the binary</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pause()         <span style=color:#75715e>#  </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>p<span style=color:#f92672>.</span>interactive() <span style=color:#75715e># drops you into an interactive shell</span>
</span></span><span style=display:flex><span>p<span style=color:#f92672>.</span>close()       <span style=color:#75715e># oh man, idk</span>
</span></span></code></pre></div></section><section><h2 id=sending--receiving-data>sending & receiving data</h2><p>how do we interact with the program?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span>p<span style=color:#f92672>.</span>recvline()                 <span style=color:#75715e># reads one line from the process</span>
</span></span><span style=display:flex><span>p<span style=color:#f92672>.</span>recvuntil(<span style=color:#e6db74>&#39;line&#39;</span>)          <span style=color:#75715e># read input from p until &#39;line&#39;</span>
</span></span><span style=display:flex><span>p<span style=color:#f92672>.</span>sendline(line)             <span style=color:#75715e># sends the line to the program</span>
</span></span><span style=display:flex><span>p<span style=color:#f92672>.</span>sendlineafter(until, line) <span style=color:#75715e># combines recvuntil() and sendline()</span>
</span></span></code></pre></div></section><section><h2 id=packing-data>packing data</h2><p>binaries like ints & bytes, not strings</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span>p32(<span style=color:#ae81ff>0x12345678</span>)          <span style=color:#75715e># packs a 32-bit hex number (b&#39;\x78\x56\x34\x12&#39;)</span>
</span></span><span style=display:flex><span>u32(<span style=color:#e6db74>b</span><span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\x78\x56\x34\x12</span><span style=color:#e6db74>&#39;</span>) <span style=color:#75715e># unpacks a 32-bit (little-endian) number.</span>
</span></span><span style=display:flex><span>hex(x)           <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>bytes(x)         <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>int(x, <span style=color:#ae81ff>16</span>)
</span></span><span style=display:flex><span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>encode()    <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>b</span><span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>.</span>decode()    <span style=color:#75715e># </span>
</span></span></code></pre></div></section><section><h2 id=access-the-binaries-data>access the binaries data</h2><p>how do I grab the function pointers automatically?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span>p <span style=color:#f92672>=</span> process(<span style=color:#e6db74>&#39;./program&#39;</span>)
</span></span><span style=display:flex><span>e <span style=color:#f92672>=</span> ELF(<span style=color:#e6db74>&#39;./program&#39;</span>)
</span></span><span style=display:flex><span>e <span style=color:#f92672>=</span> p<span style=color:#f92672>.</span>elf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>e<span style=color:#f92672>.</span>symbols[<span style=color:#e6db74>&#39;win&#39;</span>]   <span style=color:#75715e># get the address of &#34;function_name&#34;</span>
</span></span><span style=display:flex><span>e<span style=color:#f92672>.</span>got[<span style=color:#e6db74>&#39;printf&#39;</span>]    <span style=color:#75715e># dw about this yet</span>
</span></span><span style=display:flex><span>e<span style=color:#f92672>.</span>address <span style=color:#f92672>=</span> <span style=color:#ae81ff>0x1234</span> <span style=color:#75715e># set the binary base address (for aslr)</span>
</span></span></code></pre></div></section><section><h2 id=debugging-with-gdb>debugging with gdb</h2><p>you can launch gdb from within pwntools to debug</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#75715e># https://docs.pwntools.com/en/stable/gdb.html</span>
</span></span><span style=display:flex><span>context<span style=color:#f92672>.</span>arch <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;i386&#39;</span>
</span></span><span style=display:flex><span>context<span style=color:#f92672>.</span>terminal <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;urxvt&#39;</span>, <span style=color:#e6db74>&#39;-e&#39;</span>, <span style=color:#e6db74>&#39;sh&#39;</span>, <span style=color:#e6db74>&#39;-c&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gdb_command <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    break *main
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    si
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gdb<span style=color:#f92672>.</span>attach(p, cmd)        <span style=color:#75715e># attach to an existing process</span>
</span></span><span style=display:flex><span>gdb<span style=color:#f92672>.</span>debug(<span style=color:#e6db74>&#39;./vuln&#39;</span>, cmd)  <span style=color:#75715e># spin up a debugger process, stopped at the first instruction</span>
</span></span></code></pre></div><p>if the window it spawns is ugly a hell, check out <a href=https://waugh.zip/6447/resources/Xresources>this</a></p></section></section><section><h2 id=lab>lab</h2><ul><li>set up your tooling<ul><li>pwntools</li><li>gdb/pwndbg</li><li>binaryninja</li></ul></li><li>sort out groups for the fuzzer.</li></ul></section><section><h1 id=walkthrough>walkthrough</h1></section></div></div><script type=text/javascript src=../reveal-hugo/object-assign.js></script><a href=../reveal-js/css/print/ id=print-location style=display:none></a><script type=text/javascript>var printLocationElement=document.getElementById("print-location"),link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href=printLocationElement.href+(window.location.search.match(/print-pdf/gi)?"pdf.css":"paper.css"),document.getElementsByTagName("head")[0].appendChild(link)</script><script type=application/json id=reveal-hugo-site-params>null</script><script type=application/json id=reveal-hugo-page-params>null</script><script src=../reveal-js/js/reveal.js></script><script type=text/javascript>function camelize(e){return e&&Object.keys(e).forEach(function(t){newK=t.replace(/(_\w)/g,function(e){return e[1].toUpperCase()}),newK!=t&&(e[newK]=e[t],delete e[t])}),e}var revealHugoDefaults={center:!0,controls:!0,history:!0,progress:!0,transition:"slide"},revealHugoSiteParams=JSON.parse(document.getElementById("reveal-hugo-site-params").innerHTML),revealHugoPageParams=JSON.parse(document.getElementById("reveal-hugo-page-params").innerHTML),options=Object.assign({},camelize(revealHugoDefaults),camelize(revealHugoSiteParams),camelize(revealHugoPageParams));Reveal.initialize(options)</script><script type=text/javascript src=../reveal-js/plugin/markdown/marked.js></script><script type=text/javascript src=../reveal-js/plugin/markdown/markdown.js></script><script type=text/javascript src=../reveal-js/plugin/highlight/highlight.js></script><script type=text/javascript src=../reveal-js/plugin/zoom-js/zoom.js></script><script type=text/javascript src=../reveal-js/plugin/notes/notes.js></script></body></html>