<!doctype html><html lang=en><head><meta charset=utf-8><title>week01: introduction</title>
<meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><link rel=stylesheet href=../../reveal-js/css/reset.css><link rel=stylesheet href=../../reveal-js/css/reveal.css><link rel=stylesheet href=../../reveal-js/css/theme/black.css id=theme><link rel=stylesheet href=../../highlight-js/default.min.css></head><body><div class=reveal><div class=slides><section><h2 id=well-get-started-at-1805>We&rsquo;ll get started at 18:05</h2></section><section data-noprocess data-shortcode-slide class=center><h1 id=course-intro--background>course intro + background</h1><h2 id=comp6447-week01>COMP6447 Week01</h2></section><section><h2 id=good-faith-policy>Good faith policy</h2><p>We expect a high standard of professionalism from you at all times while you are taking any of our courses. We expect all students to act in good faith at all times</p><p><em>TLDR: Don&rsquo;t be a <del>dick</del> jerk</em></p><p><a href=https://sec.edu.au/good-faith-policy>sec.edu.au/good-faith-policy</a></p></section><section><h1 id=course-introduction>course introduction</h1></section><section><section data-shortcode-section><h2 id=contact-hours>contact hours</h2><ul><li>lectures - 2 hours</li><li>tutorials - 2 hours</li></ul><blockquote><p>maybe less than you&rsquo;re used to</p></blockquote></section><section><h2 id=lectures>lectures</h2><ul><li>lectures are streamed online && recorded</li><li>small intermission for questions</li><li>stop me anytime throughout for questions</li></ul><p> </p><h4 id=an-aside>an aside</h4><ul><li>please come in person</li><li><del>recordings won&rsquo;t get released if attendance is low</del></li><li>this lecture hall already looks like a dungeon, don&rsquo;t let us here alone</li></ul></section><section><h2 id=tutorials>tutorials</h2><ul><li><em>hour 1</em>: more depth into lecture content, and demonstrations/walkthroughs of techniques</li><li><em>hour 2</em>: you give the challenges (e.g. tutorial demos/wargames) a try<ul><li>there are separate (easier) tutorial challenges</li></ul></li></ul><blockquote><p>this week: tooling setup</p></blockquote></section><section><h2 id=self-learning>self-learning</h2><p>A lot of hard/niche content in this course</p><ul><li>We cover the fundamentals.</li><li>Burden is on you to experiment with techniques.<ul><li>All advanced exploitation techniques are based on the fundamentals we teach</li><li>But it will require more depth of understanding than we go into</li></ul></li></ul></section><section><h2 id=how-to-contact-us>how to contact us</h2><ul><li>discord <a href>TODO: link</a> ~/SECURITY/comp6447</li><li>contact your tutor</li><li><a href=mailto:cs6447@cse.unsw.edu.au>cs6447@cse.unsw.edu.au</a> (personal stuff)</li><li><del>ask adam directly</del></li></ul><blockquote><p>please come with a good question</p></blockquote></section></section><section><section data-shortcode-section><h1 id=assessments>assessments</h1><ul><li>Weekly Wargames (30%)</li><li>Fuzzer Assignment (30%)</li><li>Final Exam (40%)</li></ul></section><section><h2 id=wargames>wargames</h2><ul><li>2 - 6 challenges per week<ul><li>made up of pwn, re, and src (more on this later)</li><li>mostly pwn (but, this requires skills in the others)</li></ul></li><li>submit the flags and writeup for each challenge</li><li><em>wargame 6 is under exam conditions</em></li></ul><blockquote><p>should be on CTFd soon™</p></blockquote></section><section><h2 id=final-exam>final exam</h2><ul><li>very similar to the weekly wargames</li><li><em>under time pressure</em><ul><li>plsplspls prepare for this</li></ul></li><li>in the final, pwn, src and re are weighted equally</li></ul></section><section><h2 id=fuzzer-assignment>fuzzer assignment</h2><ul><li>group assignment</li><li>3 - 4 people per group</li><li>really fun, open-ended project</li><li>more on this later (comes out ~ week5)</li></ul></section></section><section><section data-shortcode-section><h1 id=course-content>course content</h1><p>what do you actually do</p></section><section><h2 id=three-major-parts>three major parts</h2><ul><li>source code auditing (src)</li><li>reverse engineering (re)</li><li>binary exploitation (pwn)</li></ul><blockquote><p>and fuzzing, kinda</p></blockquote></section><section><h3 id=source-code-auditing>source code auditing</h3><ul><li>examining the source code of an application to find any bugs, errors, vulnerabilities</li><li>sounds simple, but can be very difficult<ul><li>what if the application has many code paths</li><li>what if it&rsquo;s a multi-file application</li><li>what if it uses a bunch of libraries</li></ul></li></ul></section><section><h3 id=reverse-engineering>reverse engineering</h3><p>deconstructing a program to work out it’s underlying code, architecture, design, etc</p><ul><li>reading the source code without being given it</li><li>if you want to get started early, check out <a href=https://0xinfection.github.io/reversing/>this</a></li></ul></section><section><h3 id=two-main-types>two main types</h3><ul><li><em>static</em>: examine an executable without executing it (disassembling)</li><li><em>dynamic</em>: examine an executable by &mldr;. executing it (debugging)</li></ul></section><section><h3 id=binary-exploitation>binary exploitation</h3><p>the good stuff</p><ul><li>tricking a binary file to do what you want<ul><li>read/write a file</li><li>pop a shell?</li></ul></li></ul></section></section><section><section data-shortcode-section><h1 id=tips-to-succeed>tips to succeed</h1><p>how to get good mark</p></section><section><h3 id=wheres-the-bug>wheres the bug?</h3><p><a href=assets/code/large.md>link</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stddef.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define NAME_LEN 64;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>struct</span> user {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>char</span> name[NAME_LEN];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> level;
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>user_t</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>user_t</span> users[<span style=color:#ae81ff>100</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> n_users;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> current_user;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>logged_in</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (current_user <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>create_user</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n_users <span style=color:#f92672>==</span> <span style=color:#ae81ff>100</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fprintf</span>(stderr, <span style=color:#e6db74>&#34;nah, too many users already. cya&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> level;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;whats your level?&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>scanf</span>(<span style=color:#e6db74>&#34;%d&#34;</span>, <span style=color:#f92672>&amp;</span>level);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (level <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fprintf</span>(stderr, <span style=color:#e6db74>&#34;haha no&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    users[n_users].level <span style=color:#f92672>=</span> level;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;whats your name?&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fgets</span>(users[n_users].name, <span style=color:#ae81ff>65</span>, stdin);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    current_user <span style=color:#f92672>=</span> n_users;
</span></span><span style=display:flex><span>    <span style=color:#f92672>++</span>n_users;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>login</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>logged_in</span>()) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;nah</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>char</span> buffer[<span style=color:#ae81ff>128</span>];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fgets</span>(buffer, <span style=color:#ae81ff>128</span>, stdin);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n_users; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>strcmp</span>(buffer, users[i].name) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            current_user <span style=color:#f92672>=</span> i;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;user not found&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>logout</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>logged_in</span>()) {
</span></span><span style=display:flex><span>        current_user <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;cya&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>execute_command</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (current_user <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> users[current_user].level <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;welcome admin!&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>system</span>(<span style=color:#e6db74>&#34;/bin/sh&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;you aren&#39;t authorized to do that</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>menu</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>puts</span>(<span style=color:#e6db74>&#34;available commands&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>puts</span>(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\t</span><span style=color:#e6db74>[L]ogin&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>puts</span>(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\t</span><span style=color:#e6db74>[C]reate user&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>puts</span>(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\t</span><span style=color:#e6db74>[M]Logout&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>puts</span>(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\t</span><span style=color:#e6db74>[R]un command&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>puts</span>(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\t</span><span style=color:#e6db74>[Q]uit&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>void</span>) {
</span></span><span style=display:flex><span>    current_user <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (<span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>menu</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;$&gt; &#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span>(<span style=color:#a6e22e>getchar</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;L&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>login</span>();
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>create_user</span>();
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;M&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>logout</span>();
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;R&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>execute_command</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;Q&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>exit</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;????&#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></section><section><h3 id=how-about-now>how about now?</h3><p><a href=assets/code/medium.md>link</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#75715e>#define NAME_LEN 64;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>struct</span> user {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>char</span> name[NAME_LEN];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> level;
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>user_t</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>create_user</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n_users <span style=color:#f92672>==</span> <span style=color:#ae81ff>100</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fprintf</span>(stderr, <span style=color:#e6db74>&#34;nah, too many users already. cya&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> level;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;whats your level?&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>scanf</span>(<span style=color:#e6db74>&#34;%d&#34;</span>, <span style=color:#f92672>&amp;</span>level);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (level <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fprintf</span>(stderr, <span style=color:#e6db74>&#34;haha no&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    users[n_users].level <span style=color:#f92672>=</span> level;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;whats your name?&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fgets</span>(users[n_users].name, <span style=color:#ae81ff>65</span>, stdin);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    current_user <span style=color:#f92672>=</span> n_users;
</span></span><span style=display:flex><span>    <span style=color:#f92672>++</span>n_users;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></section><section><h3 id=how-about-now-1>how about now?</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#75715e>#define NAME_LEN 64;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>struct</span> user {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>char</span> name[NAME_LEN];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> level;
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>user_t</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>create_user</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// boring
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>fgets</span>(users[n_users].name, <span style=color:#ae81ff>65</span>, stdin);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// boring
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div></section><section><h3 id=if-nobody-got-it>if nobody got it</h3><ul><li>there&rsquo;s a one byte overflow in the users field</li><li>you can overflow the level field of the user</li><li>e.g. change your level to admin or something</li></ul></section><section><h3 id=whats-your-point>whats your point</h3><ul><li>there&rsquo;s a lot of garbage<ul><li>verbose tooling output</li><li>assembly instructions</li><li>random imported functions</li></ul></li></ul><blockquote><p>most of it isn&rsquo;t important, pay attention to what is</p></blockquote></section><section><h3 id=dont-fall-behind>don&rsquo;t fall behind</h3><ul><li>each weeks content will build on the previous weeks</li><li>if you don&rsquo;t understand the fundamentals of a previous topic, it&rsquo;s hard to learn the next topic</li></ul></section><section><h3 id=basic-course-structure>basic course structure</h3><table><thead><tr><th>week02</th><th>buffer overflows</th></tr></thead><tbody><tr><td>week03</td><td>shellcode && stack canaries</td></tr><tr><td>week04</td><td>format strings</td></tr><tr><td>week05</td><td>return-oriented programming</td></tr><tr><td>week07</td><td>heap (uaf, double free)</td></tr><tr><td>week8/9/10</td><td>further techniques (e.g. defeating mitigations)</td></tr></tbody></table></section><section><h3 id=get-started-early>get started early</h3><ul><li>there&rsquo;s some fantastic resources online you can utilize if you wanted to get ahead<ul><li><a href="https://www.youtube.com/watch?v=iyAyN3GFM7A&amp;list=PLhixgUqwRTjxglIswKp9mpkfPNfHkzyeN">binary exploitation</a> - LiveOverflow</li><li><a href="https://www.youtube.com/watch?v=TLa2VqcGGEQ&amp;list=PLhixgUqwRTjy0gMuT4C3bmjeZjuNQyqdx">developing a fuzzer</a> - LiveOverflow</li><li><a href=https://0xinfection.github.io/reversing/>reverse engineering</a> - 0xinfection</li><li><a href=https://exploit.education/phoenix/>protostar challenges</a> - exploit.education</li></ul></li></ul></section></section><section><section data-shortcode-section><h1 id=exploitation>Exploitation</h1></section><section><h2 id=terminology>terminology</h2><ul><li>bug – A programming error or oversight that can be triggered to produce incorrect results, or cause it to behave in unintended ways</li><li>threat - A person or group able to do harm or performing some hostile action</li></ul></section><section><h2 id=more-terminology>more terminology</h2><ul><li>vulnerability – A software or system weakness which allows the system to be used in a manner which would be considered a breach of the intended or extended result.</li><li>exploit – A tool or code created to exploit one or more vulnerabilities for some purpose. In reality, good exploits for some vulnerabilities take weeks or months of
high-skill development</li></ul></section><section><h2 id=types-of-vulnerabilities>types of vulnerabilities</h2><ul><li><p>design vulnerabilities</p><ul><li>major mistakes at a high level, ie: how components interact with each other, ie: wifi deauth</li><li>hard to fix, require total rewrites</li></ul></li><li><p>implementation vulnerabilities</p><ul><li>minor mistakes in implementation (off by one errors, forgetting to seed rand())</li><li>software engineers making mistakes, misreading documentation, etc</li></ul></li></ul></section><section><h2 id=where-to-find-them>where to find them</h2><ul><li><p><em>file formats</em>: Exploits in complex file formats which are decoded by complex software, ie: videos, images</p></li><li><p><em>remote</em>: exploits that can compromise a system over a network ie: web server, ssh, etc</p></li><li><p><em>client side</em>: ie: web browser</p></li><li><p><em>local (privesc)</em>: exploiting software running as a higher privilege on the same machine. ie: kernel</p></li></ul></section><section><h2 id=mitigations>mitigations</h2><p>why we teach old stuff</p><p>Modern computers have a lot of exploit mitigations.</p><ul><li>We start by learning the basics (stuff that wouldn&rsquo;t work anymore)</li><li>more tech makes it harder/impossible to get reliable (or any) exploits
getreliable, and sometimes they even make it impossible</li><li>we disable these mitigations, then slowly enable them to teach you how to bypass them</li></ul></section><section><h2 id=finding-bugs-irl>finding bugs IRL</h2><p><em>vulnerabilities</em></p><ul><li>public (full) disclose</li><li>coordinated (“responsible”) vendor disclosure</li><li>(responsible) non-disclosure</li></ul><p><em>exploits</em>:</p><ul><li>simple PoC, public disclose (ie: metasploit)</li><li>decent - commercial exploit pack (ie: celebrite)</li><li>great - fame, $$$</li></ul><blockquote><p>good intentions won&rsquo;t keep you safe</p></blockquote></section><section><h2 id=when-might-i-use-this>when might I use this</h2><ul><li><em>penetration testing</em>: brief assessments of a particular product or environment - frequently based on network scanning and/or analysis of a web or mobile app</li><li><em>red teaming</em>: more in-depth, open ended penetration testing - without a limited scope but often with an objective - i.e. compromise any web servers or employees of XYZ company</li><li><em>vulnerability research</em>: not focused on implementation or deployment of a technology - focused on the actual technology itself - i.e. finding vulnerabilities in the a library</li></ul></section></section><section><section data-shortcode-section><h1 id=why-is-this-important>why is this important</h1><p>why are we attacking C programs lol</p></section></section><section><section data-shortcode-section><h1 id=memory-fundamentals>memory fundamentals</h1></section><section><h2 id=what-are-peoples-backgrounds>what are people&rsquo;s backgrounds?</h2><ul><li>who&rsquo;s done operating systems? COMP3231/COMP3891</li><li>who&rsquo;s done web apps? COMP6[84]45</li><li>who&rsquo;s done the intro to security? COMP6[84]41</li></ul></section><section><h2 id=conceptualising-memory>conceptualising memory</h2><p>at a low level, CPUs see a long strip of bytes</p><ul><li>Memory is just a range of values CPUs can access</li><li>CPUs have a few registers for super duper fast access, but these are really
small and not considered part of memory
<img src=../lecture01/assets/img/stack1d.png alt></li></ul></section><section><h2 id=visualising-memory>visualising memory</h2><p>RAM is 1D. But thinking about it in 2d can be useful.</p><ul><li>Memory is often not accessed 1 byte at a time.</li><li>We care about data structures, not bytes</li></ul><p><img src=../lecture01/assets/img/stack32-2d.png alt>
<img src=../lecture01/assets/img/stack64-2d.png alt>
<img src=../lecture01/assets/img/address.png alt></p></section><section><h2 id=data-types-in-memory>data types in memory</h2><p>C and C++ use a bunch of several core types to do work. But all of them are just integers of various sizes.</p><ul><li>char; 1 byte</li><li>short: 2 bytes or more</li><li>int: normally 4 bytes</li><li>long: at least 4 bytes, at least as long as int</li><li>pointers: normally 4 bytes, or 8 depending on architecture (just spicy ints)</li><li>structs: a sequence of different variations of above types</li></ul></section><section><h2 id=signedness>signedness</h2><p>how is a negative number stored in memory?</p><ul><li>basically flip the bits and add 1</li><li>this could mean a really big number in memory, is actually a very small negative one</li></ul><blockquote><p>how could this result in vulnerabilities?</p></blockquote></section><section><h2 id=pointers>pointers</h2><p>Pointers aren’t special or magic.</p><blockquote><p>Pointers are just another integer, where the value is the address of something else</p></blockquote></section><section><h2 id=endianness>endianness</h2><p>Each architecture has Endianness</p><ul><li>Big or little endian (MIPS, PowerPC vs x86)</li><li>x86 is little endian</li><li>Some architectures let you pick/switch the endianness during runtime (ARM)</li><li>Little endian is more prevalent for reasons (laziness)<ul><li>Used to be “wrong-endian” (you can be a bit more dodgy with your types and things wouldn’t break)</li></ul></li><li>Endianness only applies to memory. Not to registers</li></ul></section><section><h2 id=endianness-1>endianness</h2><p><img src=../lecture01/assets/img/endian.png alt></p></section><section><h2 id=address-space-layout>address space layout</h2><p>We only worry about virtual addresses</p><ul><li>Virtual Address Spaces are split into regions</li><li>Each segment has set permissions</li><li>.text (code) usually r-x<ul><li>.data (global variables) usually rw-</li><li>.rodata (constants) usually r–</li></ul></li></ul><p><img src=../lecture01/assets/img/addressspace.png alt></p></section></section><section><section data-shortcode-section><h1 id=other-knowledge>other knowledge</h1><p>background stuff you should know for the course</p></section><section><h1 id=linux-fundamentals>linux fundamentals</h1></section><section><h2 id=the-command-line>the command line</h2><p>what is a shell?</p><p><img src=../lecture01/assets/img/shell.png alt></p><blockquote><p>soo spooky, no gui ahh</p></blockquote></section><section><h2 id=linux-fundamentals-1>linux fundamentals</h2><ul><li>does anyone know what &ldquo;popping a shell means?&rdquo;</li><li>what can you do once you pop a shell?</li></ul></section><section><h2 id=essentially>essentially</h2><ul><li>escaping the sandbox of the application, into the server</li><li>you can start executing commands on the server</li></ul></section><section><h2 id=shell-command-deep-dive>shell command deep dive</h2><p>all you&rsquo;ll need to know to be l33t</p><blockquote><p><code>cat flag</code></p></blockquote></section><section><h2 id=scripting>scripting</h2><ul><li>how many people have written a script before</li><li>what about used python for further purposes</li><li>our usage of python will be very basic</li></ul></section><section><h2 id=pwntools>pwntools</h2><p>basic usage</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#f92672>from</span> pwn <span style=color:#f92672>import</span> <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>r <span style=color:#f92672>=</span> remote(<span style=color:#e6db74>&#39;vulnserver.xyz&#39;</span>, <span style=color:#ae81ff>1234</span>)  <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>p <span style=color:#f92672>=</span> process(<span style=color:#e6db74>&#39;./vuln&#39;</span>)               <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>e <span style=color:#f92672>=</span> p<span style=color:#f92672>.</span>elf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>p<span style=color:#f92672>.</span>recvuntil(<span style=color:#e6db74>b</span><span style=color:#e6db74>&#39;some text the program outputs&#39;</span>)
</span></span><span style=display:flex><span>p<span style=color:#f92672>.</span>sendline(<span style=color:#e6db74>b</span><span style=color:#e6db74>&#39;AAAAAAAAAAAAAAAAAAAAA&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>p<span style=color:#f92672>.</span>interactive() <span style=color:#75715e># drops you into an interactive shell</span>
</span></span><span style=display:flex><span>p<span style=color:#f92672>.</span>close()       <span style=color:#75715e># oh man, idk</span>
</span></span></code></pre></div></section><section></section></section><section><section data-shortcode-section><h2 id=how-is-this-relevant-i-only-write-python-code>how is this relevant, I only write python code</h2></section><section><h3 id=abstraction-is-cringe>abstraction is cringe</h3><ul><li>many people don&rsquo;t really understand</li></ul></section><section><h2 id=cloudbleed>Cloudbleed</h2><ul><li>basically a buffer overflow</li></ul></section><section><h2 id=zenbleed>Zenbleed</h2><ul><li>very similar idea to a use-after-free</li></ul><p><a href=https://lock.cmpxchg8b.com/zenbleed.html>read more here</a></p></section><section><pre tabindex=0><code>    vcvtsi2s{s,d}   xmm, xmm, r64
    vmovdqa         ymm, ymm
    jcc             overzero
    vzeroupper
overzero:
    nop
</code></pre></section><section><h2 id=phone-phreaking>phone phreaking</h2></section><section></section></section></div></div><script type=text/javascript src=../../reveal-hugo/object-assign.js></script><a href=../../reveal-js/css/print/ id=print-location style=display:none></a><script type=text/javascript>var printLocationElement=document.getElementById("print-location"),link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href=printLocationElement.href+(window.location.search.match(/print-pdf/gi)?"pdf.css":"paper.css"),document.getElementsByTagName("head")[0].appendChild(link)</script><script type=application/json id=reveal-hugo-site-params>null</script><script type=application/json id=reveal-hugo-page-params>null</script><script src=../../reveal-js/js/reveal.js></script><script type=text/javascript>function camelize(e){return e&&Object.keys(e).forEach(function(t){newK=t.replace(/(_\w)/g,function(e){return e[1].toUpperCase()}),newK!=t&&(e[newK]=e[t],delete e[t])}),e}var revealHugoDefaults={center:!0,controls:!0,history:!0,progress:!0,transition:"slide"},revealHugoSiteParams=JSON.parse(document.getElementById("reveal-hugo-site-params").innerHTML),revealHugoPageParams=JSON.parse(document.getElementById("reveal-hugo-page-params").innerHTML),options=Object.assign({},camelize(revealHugoDefaults),camelize(revealHugoSiteParams),camelize(revealHugoPageParams));Reveal.initialize(options)</script><script type=text/javascript src=../../reveal-js/plugin/markdown/marked.js></script><script type=text/javascript src=../../reveal-js/plugin/markdown/markdown.js></script><script type=text/javascript src=../../reveal-js/plugin/highlight/highlight.js></script><script type=text/javascript src=../../reveal-js/plugin/zoom-js/zoom.js></script><script type=text/javascript src=../../reveal-js/plugin/notes/notes.js></script></body></html>